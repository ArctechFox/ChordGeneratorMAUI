<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
			 xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
			 xmlns:db="clr-namespace:ChordGeneratorMAUI.DataAccess"
             x:Class="ChordGeneratorMAUI.Views.ChordBuilderPopup">
	
	<Grid Background="{StaticResource White}">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*"></ColumnDefinition>
			<ColumnDefinition Width="Auto"></ColumnDefinition>
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"></RowDefinition>
			<RowDefinition Height="*"></RowDefinition>
			<RowDefinition Height="Auto"></RowDefinition>
		</Grid.RowDefinitions>

		<SearchBar Grid.Column="0" Grid.Row="0" x:Name="searchBar" Placeholder="Search chords..." IsTextPredictionEnabled="True" FontSize="Large"
				   Text="{Binding ChordSearchQuery}"
				   SearchCommand="{Binding SearchChordsCommand}" 
				   SearchCommandParameter="{Binding ChordSearchQuery}"></SearchBar>

		<VerticalStackLayout Grid.Column="1" Grid.Row="0" Padding="5" Margin="0">
			<HorizontalStackLayout>
				<Switch IsToggled="{Binding WriteOnlyChordsInKey}" HorizontalOptions="Start" Margin="0,0,15,0"></Switch>
				<Label Text="In Key" TextColor="{StaticResource Black}" FontSize="Body" HorizontalTextAlignment="Start" Margin="0"></Label>
				<Label Text="{Binding ChordChart.SelectedKey}" FontAttributes="Bold" TextColor="{StaticResource Black}" FontSize="Body" HorizontalTextAlignment="Start" Margin="0"></Label>
			</HorizontalStackLayout>

			<Button Text="Empty Slot" TextColor="{StaticResource White}"></Button>
		</VerticalStackLayout>

		<ListView Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" SelectionMode="Single" Background="{StaticResource Gray600Brush}"
				  ItemsSource="{Binding ChordBuilderSearchResults}" 
				  SelectedItem="{Binding SelectedChordBuilderChord}">

			<ListView.ItemTemplate>
				<DataTemplate>
					<ViewCell>
						<Label Text="{Binding Name}" TextColor="{StaticResource White}" FontSize="Small" Margin="2"></Label>
					</ViewCell>
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>

		<Button Text="Insert" Grid.ColumnSpan="2" Grid.Row="2" Command="{Binding WriteNewChordCommand}" Margin="5"></Button>

	</Grid>
</toolkit:Popup>
